<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Thi·ªáp Gi√°ng Sinh ‚Äî Full</title>

    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        .gift {
            position: relative;
        }

        .gift-lid {
            position: absolute;
            top: -18px;
            left: 0;
            width: 100%;
            height: 22px;
            background: #d33;
            border-radius: 6px 6px 4px 4px;
            transform-origin: bottom left;
            transition: transform .6s ease;
        }

        .spark {
            position: absolute;
            font-size: 14px;
            pointer-events: none;
            animation: sparkFly 1.4s ease-out forwards;
        }

        @keyframes sparkFly {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 1;
            }

            100% {
                transform: translate(var(--x), var(--y)) scale(1.2);
                opacity: 0;
            }
        }

        @keyframes glowPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        #giftSurprise.play {
            animation: glowPulse 1.2s infinite;
        }



        .gift-wrap.open .gift-lid {
            transform: rotate(-110deg);
        }

        #giftSurprise {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;

            font-size: 14px;
            color: #ffd973;
            text-align: center;
            opacity: 0;
            transform: scale(0.4);
            transition: .4s ease;
            text-shadow:
                0 0 12px rgba(255, 200, 80, 0.9),
                0 0 26px rgba(255, 230, 150, 0.8),
                0 0 48px rgba(255, 180, 60, 0.6);
            pointer-events: none;
        }

        :root {
            --gold: #ffd973;
            --neon: #7efcff;
            --bg-dark: #031022;
            --glass: rgba(255, 255, 255, 0.04);
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%;
            margin: 0;
            font-family: 'Playfair Display', serif;
            background: var(--bg-dark);
            color: #fff;
            overflow: hidden
        }

        #app {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* Pages */
        .page {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity .6s, transform .6s;
            backdrop-filter: blur(0.6px);
            z-index: 100;
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
            transform: scale(.995);
        }

        .visible {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
        }

        h1.main {
            font-size: 3.2rem;
            margin: 0;
            text-align: center;
            pointer-events: none
        }

        p.lead {
            max-width: 720px;
            text-align: center;
            font-size: 1.15rem;
            margin: 12px 20px;
            color: #f5f5f5a0
        }

        /* Buttons */
        .controls {
            position: fixed;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
            z-index: 1200
        }

        .btn {
            appearance: none;
            border: 0;
            padding: 6px 12px;
            border-radius: 8px;
            background: linear-gradient(180deg, #fff 0, #ffd700 100%);
            color: #000;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, .3);
            transition: transform 0.1s;
        }

        .btn:active {
            transform: scale(0.96);
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: #fff
        }

        /* canvases (stacked) */
        canvas.full {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10
        }

        #canvas-bg {
            z-index: 5
        }

        /* soft background (tree glow) */
        #canvas-snow1 {
            z-index: 30
        }

        /* crisp snow */
        #canvas-snow2 {
            z-index: 25
        }

        /* soft snow blur layer */
        #canvas-stars {
            z-index: 20
        }

        /* stars */
        #canvas-fire {
            z-index: 40
        }

        /* fireworks/particles */
        #canvas-text {
            z-index: 35
        }

        /* falling gold text */



        /* Glowing tree (CSS frame used as fallback) */
        .tree-frame {
            position: fixed;
            right: 6%;
            bottom: 6%;
            width: 260px;
            height: 420px;
            z-index: 50;
            pointer-events: none;
            display: flex;
            align-items: flex-end;
            justify-content: center
        }

        .tree-svg {
            width: 100%;
            height: 100%
        }

        /* Gift bounce */
        .gift-wrap {
            position: relative;
            margin-top: 20px;
            z-index: 160;
            cursor: pointer
        }

        .gift {
            width: 120px;
            height: 100px;
            background: linear-gradient(180deg, #e33 0, #b00 100%);
            border-radius: 10px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6)
        }

        .gift .ribbon {
            position: absolute;
            left: 0;
            right: 0;
            top: 40%;
            height: 18px;
            background: linear-gradient(90deg, #fff2, #ffb3);
            transform: rotate(0)
        }

        .gift-bounce {
            animation: pop 1s infinite ease-in-out
        }

        @keyframes pop {
            0% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-12px) scale(1.03)
            }

            100% {
                transform: translateY(0)
            }
        }

        /* Neon text */
        .neon {
            font-size: 2.4rem;
            color: #f0f0ef;
            /* Christmas Gold */
            font-weight: 700;
            text-shadow:
                0 0 10px rgba(255, 215, 0, 0.7),
                0 0 20px rgba(255, 215, 0, 0.5),
                0 0 40px rgba(255, 215, 0, 0.3);
            z-index: 160;
            margin-top: 12px;
        }

        /* gold falling words container */
        .fall-wrap {
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 80
        }

        /* rainbow sweep */
        .rainbow {
            position: fixed;
            left: -30%;
            top: 0;
            width: 160%;
            height: 100%;
            pointer-events: none;
            mix-blend-mode: screen;
            z-index: 60;
            opacity: .18;
            background: linear-gradient(90deg, #ff5 0%, #ff1 15%, #7bff 30%, #49f 45%, #cf8 60%, #ff5 75%);
            animation: rainbowMove 8s linear infinite
        }

        @keyframes rainbowMove {
            0% {
                transform: translateX(-20%)
            }

            50% {
                transform: translateX(20%)
            }

            100% {
                transform: translateX(-20%)
            }
        }

        /* small UI hint at bottom */
        .hint {
            position: fixed;
            left: 16px;
            bottom: 12px;
            color: #fff6;
            z-index: 999;
            font-size: 13px
        }

        /* responsive */
        @media (max-width:640px) {
            h1.main {
                font-size: 1.6rem;
                padding: 0 10px;
            }

            p.lead {
                font-size: 0.95rem;
                line-height: 1.6;
                padding: 0 20px;
                margin: 8px 10px;
            }

            .santa {
                width: 100px;
                top: 5%;
            }

            .santa-run {
                width: 180px;
                height: 90px;
            }

            .tree-frame {
                display: none
            }

            .controls {
                top: 10px;
                right: 10px;
            }

            .btn {
                padding: 8px 12px;
                font-size: 14px;
            }

            #giftSurprise {
                font-size: 12px;
            }
        }

        /* Santa flying effect container */
        .santa-run {
            position: fixed;
            top: 15%;
            left: -100px;
            z-index: 90;
            pointer-events: none;
            /* Container moves across screen */
            animation: santaFlyAcross 20s linear infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            opacity: 0.9;
            display: flex;
            align-items: flex-end;
        }

        .santa-group {
            position: relative;
            display: inline-block;
            margin-left: -5px;
        }

        .deer {
            display: inline-block;
            font-size: 50px;
            /* Galloping motion */
            animation: gallop 0.4s infinite alternate ease-in-out;
            transform-origin: bottom center;
        }

        .sleigh {
            display: inline-block;
            font-size: 50px;
            position: relative;
            z-index: 2;
        }

        .santa-cls {
            display: inline-block;
            font-size: 42px;
            position: absolute;
            top: -12px;
            left: 10px;
            z-index: 1;
            /* Santa rocking */
            animation: santaRock 0.8s infinite alternate ease-in-out;
        }

        @keyframes gallop {
            0% {
                transform: translateY(0) rotate(0deg);
            }

            100% {
                transform: translateY(-5px) rotate(-6deg);
            }
        }

        @keyframes santaRock {
            0% {
                transform: rotate(-2deg);
            }

            100% {
                transform: rotate(5deg);
            }
        }

        @keyframes santaFlyAcross {
            0% {
                transform: translateX(-100vw) translateY(0) rotate(-2deg) scaleX(-1);
            }

            20% {
                transform: translateX(20vw) translateY(-5vh) rotate(0deg) scaleX(-1);
            }

            50% {
                transform: translateX(50vw) translateY(2vh) rotate(2deg) scaleX(-1);
            }

            100% {
                transform: translateX(120vw) translateY(-10vh) rotate(-1deg) scaleX(-1);
            }
        }

        @media (max-width: 640px) {
            .santa-run {
                top: 10%;
                animation-duration: 12s;
            }

            .deer,
            .sleigh {
                font-size: 30px;
            }

            .santa-cls {
                font-size: 24px;
                top: -6px;
                left: 5px;
            }
        }
    </style>

</head>

<body>
    <!-- Santa ch·∫°y -->
    <!-- Santa ch·∫°y -->
    <div class="santa-run">
        <span class="deer">ü¶åü¶å</span>
        <div class="santa-group">
            <span class="sleigh">üõ∑</span>
            <span class="santa-cls">üéÖ</span>
        </div>
        <span style="font-size:20px; animation: sparkleTrail 0.5s infinite alternate; margin-left:5px">‚ú®</span>
    </div>
    <div id="app">
        <!-- controls -->
        <div class="controls">
            <button id="musicToggle" class="btn" title="B·∫≠t/T·∫Øt nh·∫°c">üîä Nh·∫°c</button>
            <button id="nextPage" class="btn-ghost btn"></button>
        </div>

        <!-- canvases -->
        <canvas id="canvas-bg" class="full"></canvas> <!-- tree glow / subtle background -->
        <canvas id="canvas-stars" class="full"></canvas> <!-- stars -->
        <canvas id="canvas-snow2" class="full"></canvas> <!-- soft snow (layer 2) -->
        <canvas id="canvas-snow1" class="full"></canvas> <!-- crisp snow (layer 1) -->
        <canvas id="canvas-text" class="full"></canvas> <!-- falling gold text -->
        <canvas id="canvas-fire" class="full"></canvas> <!-- fireworks & sparkles -->

        <!-- rainbow sweep -->
        <div class="rainbow" aria-hidden="true"></div>




        <!-- small stylized triangle tree svg with glow -->
        <svg class="tree-svg" viewBox="0 0 200 320" preserveAspectRatio="xMidYMax meet">
            <defs>
                <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="6" result="coloredBlur" />
                    <feMerge>
                        <feMergeNode in="coloredBlur" />
                        <feMergeNode in="SourceGraphic" />
                    </feMerge>
                </filter>
            </defs>
            <g filter="url(#glow)">
                <polygon points="100,8 20,110 180,110" fill="#0b8b3a" />
                <polygon points="100,70 10,170 190,170" fill="#0ea54a" />
                <polygon points="100,140 5,260 195,260" fill="#0fb65a" />
                <rect x="86" y="260" width="28" height="38" fill="#7b4b20" />
                <!-- star -->
                <polygon points="100,0 106,16 124,16 110,26 116,42 100,32 84,42 90,26 76,16 94,16" fill="#ffea55" />
            </g>
        </svg>
    </div>

    <!-- PAGE 1 -->
    <section id="page1" class="page visible" aria-label="Trang 1">
        <h1 class="main"
            style="font-family:'Great Vibes',cursive; font-weight:400; font-size:4rem; color:var(--gold); text-shadow:0 0 15px rgba(255,215,0,0.6), 2px 2px 4px rgba(0,0,0,0.5); letter-spacing: 2px;">
            Merry Christmas ü§çüéÑ‚ú®</h1>
        <p class="lead"
            style="color: #f5f5f5a0;text-shadow:0 0 6px rgba(255,255,255,0.35),0 0 14px rgba(255,220,160,0.25);">Nguy·ªán
            b√¨nh an v√† t√¨nh y√™u c·ªßa Ch√∫a lu√¥n ·ªü c√πng b·∫°n ch√∫c m√πa Gi√°ng Sinh ·∫•m √°p v√† ƒë·∫ßy k·ª≥ di·ªáu ch√∫c b·∫°n Gi√°ng Sinh an
            l√†nh, n∆°i tr√°i tim ƒë∆∞·ª£c ngh·ªâ ng∆°i v√† n·ª• c∆∞·ªùi lu√¥n ·ªü l·∫°i v·ªõi ng∆∞·ªùi m√¨nh y√™u th∆∞∆°ng v√† ch√∫a lu√¥n ·ªü b√™n b·∫°n v√†
            m√πa gi√°ng sinh n√†y n·∫øu c√≥ ƒëi·ªÅu g√¨ ∆∞·ªõc mong th√¨ mong Ch√∫a gi·ªØ b·∫°n th·∫≠t b√¨nh an gi·ªØa th·∫ø gian nhi·ªÅu lo l·∫Øng v√†
            cho b·∫°n lu√¥n c√≥ m·ªôt n∆°i ƒë·ªÉ tr·ªü v·ªÅ trong y√™u th∆∞∆°ng.‚ú®</p>
        <div style="display:flex;gap:12px;align-items:center;">
            <div class="gift-wrap" id="giftWrap" title="B·∫•m ƒë·ªÉ m·ªü qu√†">
                <div id="gift" class="gift gift-bounce" aria-hidden="true">
                    <div class="gift-lid"></div>
                    <div class="ribbon"></div>
                    <!-- üéÑ CH·ªÆ B·∫§T NG·ªú -->
                    <div id="giftSurprise">üéÑ Gi√°ng Sinh an l√†nh ü§ç</div>
                </div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px;align-items:center">
                <button id="openNext" class="btn">h√£y b·∫•m v√¥ ƒë√¢y ƒë·ª´ng b·∫•m v√¥ h·ªôp qu√†üéÑü•∞ </button>
                <div class="neon">H·∫°nh ph√∫c ‚Äî An l√†nh ‚Äî Y√™u th∆∞∆°ng</div>
            </div>
        </div>
    </section>

    <!-- PAGE 2 -->
    <section id="page2" class="page hidden" aria-label="Trang 2">
        <h1 class="main"
            style="font-family:'Great Vibes',cursive; font-weight:400; font-size:3.5rem; color:#ffef9a; text-shadow:0 0 12px rgba(255,239,154,0.6); letter-spacing: 1px;">
            L·ªùi Ch√∫c Ng∆∞·ªùi B√≠ ·∫®n ü§ó</h1>
        <p class="lead">ch√∫c b·∫°n m·ªôt m√πa gi√°ng sinh th·∫≠t an l√†nh c√≥ √°nh ƒë√®n nh·ªè s∆∞·ªüi ·∫•m l√≤ng m√¨nh c√≥ nh·ªØng kho·∫£nh kh·∫Øc
            r·∫•t kh·∫Ω nh∆∞ng ƒë·ªß l√†m tim m·ªÅm l·∫°i mong nh·ªØng ng√†y cu·ªëi nƒÉm b·∫°n ƒë∆∞·ª£c b√¨nh y√™n h∆°n m·ªôt ch√∫t m·ªâm c∆∞·ªùi nhi·ªÅu h∆°n
            m·ªôt ch√∫t v√† th·∫•y cu·ªôc s·ªëng v·∫´n d·ªãu d√†ng gi√°ng sinh ƒë·∫øn kh√¥ng c·∫ßn ƒëi·ªÅu g√¨ l·ªõn lao ch·ªâ mong b·∫°n lu√¥n ƒë∆∞·ª£c y√™u
            th∆∞∆°ng theo c√°ch b·∫°n mong mu·ªën v√† ·∫•m nh·∫•t v√† trong ƒë√™m Ch√∫a gi√°ng sinh c·∫ßu ch√∫c b·∫°n ƒë∆∞·ª£c ngh·ªâ ng∆°i trong
            b√¨nh an ƒë∆∞·ª£c y√™u th∆∞∆°ng kh√¥ng ƒëi·ªÅu ki·ªán v√† ƒë∆∞·ª£c ch·ªü che b·∫±ng √¢n s·ªßng c·ªßa ng√†i v√† xin Ch√∫a ·ªü c√πng b·∫°n trong
            t·ª´ng ng√†y nh·ªè ban cho b·∫°n tr√°i tim nh·∫π nh√†ng bi·∫øt tin y√™u hy v·ªçng v√† s·ªëng hi·ªÅn l√†nh gi·ªØa ƒë·ªùi‚ùÑüåüü§ç</p>
        <div style="display:flex;gap:12px;align-items:center">
            <button id="backBtn" class="btn-ghost btn">c√°m ∆°n b·∫°n m·ªùi b·∫°n b·∫•m qua xem h·ªôp qu√† ‚ùÑÔ∏è‚¨ÖÔ∏è</button>
            <button id="stopMusic" class="btn"><svg width="80" height="80" viewBox="0 0 64 64" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <circle cx="32" cy="32" r="30" fill="#FFEBE0" />
                    <path d="M12 26c10-10 30-10 40 0v8H12v-8z" fill="#E83A2F" />
                    <circle cx="32" cy="38" r="14" fill="white" />
                    <circle cx="24" cy="34" r="3" fill="black" />
                    <circle cx="40" cy="34" r="3" fill="black" />
                    <circle cx="32" cy="42" r="4" fill="#E83A2F" />
                    <circle cx="32" cy="12" r="10" fill="#E83A2F" />
                </svg>
            </button>
        </div>
    </section>



    <!-- audio -->
    <audio id="bgMusic" loop preload="auto">
        <source src="nhac-noel-giang-sinh-vui-nhon-406382.mp3" type="audio/mpeg">
        <!-- Thay nhac.mp3 b·∫±ng ƒë∆∞·ªùng d·∫´n file nh·∫°c c·ªßa b·∫°n -->
    </audio>
    </div>

    <script>
        /* ========= Setup canvases & sizes ========= */
        const canvasBg = document.getElementById('canvas-bg');
        const canvasStars = document.getElementById('canvas-stars');
        const canvasSnow1 = document.getElementById('canvas-snow1');
        const canvasSnow2 = document.getElementById('canvas-snow2');
        const canvasText = document.getElementById('canvas-text');
        const canvasFire = document.getElementById('canvas-fire');

        const ctxBg = canvasBg.getContext('2d');
        const ctxStars = canvasStars.getContext('2d');
        const ctxSnow1 = canvasSnow1.getContext('2d');
        const ctxSnow2 = canvasSnow2.getContext('2d');
        const ctxText = canvasText.getContext('2d');
        const ctxFire = canvasFire.getContext('2d');

        function resizeAll() {
            [canvasBg, canvasStars, canvasSnow1, canvasSnow2, canvasText, canvasFire].forEach(c => {
                c.width = innerWidth * devicePixelRatio;
                c.height = innerHeight * devicePixelRatio;
                c.style.width = innerWidth + 'px';
                c.style.height = innerHeight + 'px';
                const ctx = c.getContext('2d');
                ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
            });
        }
        resizeAll();
        window.addEventListener('resize', resizeAll);

        /* ========= Background glow (subtle radial behind tree) ========= */
        function drawBgGlow() {
            const w = innerWidth, h = innerHeight;
            ctxBg.clearRect(0, 0, w, h);
            // subtle radial gradient center-left bottom
            const g = ctxBg.createRadialGradient(w * 0.8, h * 0.75, 30, w * 0.8, h * 0.75, 800);
            g.addColorStop(0, 'rgba(255,230,150,0.18)');
            g.addColorStop(0.4, 'rgba(10,80,45,0.06)');
            g.addColorStop(1, 'rgba(2,6,12,0.85)');
            ctxBg.fillStyle = g;
            ctxBg.fillRect(0, 0, w, h);
        }
        drawBgGlow();

        /* ========= Stars (twinkle) ========= */
        let stars = [];
        function initStars() {
            stars = [];
            const isMobile = innerWidth < 768;
            const count = isMobile ? 40 : Math.floor((innerWidth * innerHeight) / 90000) + 80;
            for (let i = 0; i < count; i++) {
                stars.push({
                    x: Math.random() * innerWidth,
                    y: Math.random() * innerHeight * 0.6,
                    r: Math.random() * 1.6 + 0.4,
                    a: Math.random(),
                    da: Math.random() * 0.02 + 0.002
                });
            }
        }
        initStars();
        function renderStars() {
            ctxStars.clearRect(0, 0, innerWidth, innerHeight);
            for (const s of stars) {
                s.a += s.da * (Math.random() * 1.2);
                if (s.a > 1.2) s.a = 0;
                ctxStars.beginPath();
                ctxStars.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                ctxStars.fillStyle = `rgba(255,245,200,${Math.min(s.a, 1)})`;
                ctxStars.fill();
            }
            requestAnimationFrame(renderStars);
        }
        renderStars();

        /* ========= Snow layer 1 (crisp flakes) ========= */
        let flakes1 = [];
        function initSnow1() {
            flakes1 = [];
            const isMobile = innerWidth < 768;
            const num = isMobile ? 30 : Math.min(500, Math.floor(innerWidth / 7));
            for (let i = 0; i < num; i++) {
                flakes1.push({
                    x: Math.random() * innerWidth,
                    y: Math.random() * innerHeight,
                    r: Math.random() * 3 + 0.8,
                    vy: Math.random() * 1.2 + 0.6,
                    vx: (Math.random() - 0.5) * 0.6,
                    a: Math.random() * 0.9 + 0.4
                });
            }
        }
        initSnow1();

        function renderSnow1() {
            ctxSnow1.clearRect(0, 0, innerWidth, innerHeight);
            ctxSnow1.fillStyle = '#fff';
            for (const f of flakes1) {
                ctxSnow1.beginPath();
                ctxSnow1.globalAlpha = f.a;
                ctxSnow1.arc(f.x, f.y, f.r, 0, Math.PI * 2);
                ctxSnow1.fill();
                f.x += f.vx;
                f.y += f.vy;
                // drift
                f.x += Math.sin(f.y * 0.01) * 0.3;
                if (f.y > innerHeight + 10) { f.y = -10; f.x = Math.random() * innerWidth; }
                if (f.x < -10) f.x = innerWidth + 10;
                if (f.x > innerWidth + 10) f.x = -10;
            }
            ctxSnow1.globalAlpha = 1;
            requestAnimationFrame(renderSnow1);
        }
        renderSnow1();

        /* ========= Snow layer 2 (soft blurred, slower) ========= */
        let flakes2 = [];
        function initSnow2() {
            flakes2 = [];
            const isMobile = innerWidth < 768;
            const num = isMobile ? 20 : Math.min(260, Math.floor(innerWidth / 14));
            for (let i = 0; i < num; i++) {
                flakes2.push({
                    x: Math.random() * innerWidth,
                    y: Math.random() * innerHeight,
                    r: Math.random() * 6 + 6,
                    vy: Math.random() * 0.6 + 0.2,
                    vx: (Math.random() - 0.5) * 0.3,
                    a: Math.random() * 0.35 + 0.08
                });
            }
        }
        initSnow2();

        function renderSnow2() {
            ctxSnow2.clearRect(0, 0, innerWidth, innerHeight);
            for (const f of flakes2) {
                const grad = ctxSnow2.createRadialGradient(f.x, f.y, 0, f.x, f.y, f.r);
                grad.addColorStop(0, `rgba(255,255,255,${f.a})`);
                grad.addColorStop(1, `rgba(255,255,255,0)`);
                ctxSnow2.fillStyle = grad;
                ctxSnow2.beginPath();
                ctxSnow2.arc(f.x, f.y, f.r, 0, Math.PI * 2);
                ctxSnow2.fill();
                f.x += f.vx; f.y += f.vy;
                if (f.y > innerHeight + 30) { f.y = -30; f.x = Math.random() * innerWidth; }
            }
            requestAnimationFrame(renderSnow2);
        }
        renderSnow2();

        /* ========= Gold falling sentence (Christmas slow & glow) ========= */
        let golds = [];
        const goldMsg = [
            "·∫§m √Åpüíõ",
            "Ng∆∞·ªùi Th√¢n üíû",
            "D·ªãu D√†ng‚ù§Ô∏è   "

        ];
        function initGold() {
            golds = [];
            const count = 15;

            for (let i = 0; i < count; i++) {
                golds.push({
                    x: (innerWidth / count) * i + Math.random() * 50,
                    y: Math.random() * -innerHeight,
                    s: Math.random() * 0.25 + 0.85,
                    vy: Math.random() * 0.35 + 0.2, // üéÑ r∆°i ch·∫≠m
                    rot: (Math.random() - 0.5) * 0.05,
                    sway: Math.random() * 0.02 + 0.01,
                    glow: Math.random() * 6 + 10,
                    txt: goldMsg[Math.floor(Math.random() * goldMsg.length)],
                });
            }
        }


        initGold();

        function drawGold(ctx, g) {
            ctx.save();
            ctx.translate(g.x, g.y);
            ctx.rotate(g.rot);
            ctx.scale(g.s, g.s);

            ctx.font = "30px 'Playfair Display'";
            ctx.fillStyle = "#FFD700"; // gold

            // üåü Glow effect
            ctx.shadowColor = "rgba(255, 215, 100, 0.9)";
            ctx.shadowBlur = g.glow;

            ctx.fillText(g.txt, 0, 0);
            ctx.restore();
        }

        function renderGold() {
            ctxText.clearRect(0, 0, innerWidth, innerHeight);
            ctxText.font = '700 28px Playfair Display';
            ctxText.textAlign = 'center';
            for (const g of golds) {
                drawGold(ctxText, g);
                g.y += g.vy;
                g.x += Math.sin(g.y * 0.01) * 0.6;
                if (g.y > innerHeight + 50) { g.y = -60; g.x = Math.random() * innerWidth; }
            }
            requestAnimationFrame(renderGold);
        }
        renderGold();

        /* ========= Fireworks + sparkle particles ========= */
        let particles = [];
        function spawnFirework(x, y, color, count = 28) {
            for (let i = 0; i < count; i++) {
                particles.push({
                    x: x, y: y,
                    vx: (Math.random() - 0.5) * (Math.random() * 6 + 1),
                    vy: (Math.random() - 0.5) * (Math.random() * 6 + 1),
                    life: Math.random() * 50 + 40,
                    size: Math.random() * 2 + 1,
                    color: color || `hsl(${Math.random() * 360},80%,60%)`,
                    decay: 0.96 + Math.random() * 0.02
                });
            }
        }
        function randomBursts() {
            const x = Math.random() * innerWidth * 0.8 + innerWidth * 0.1;
            const y = Math.random() * innerHeight * 0.45 + innerHeight * 0.05;
            const isMobile = innerWidth < 768;
            spawnFirework(x, y, `hsl(${Math.random() * 360},80%,60%)`, isMobile ? 15 : (40 + Math.floor(Math.random() * 20)));
        }
        setInterval(randomBursts, 2000);

        function renderFire() {
            ctxFire.clearRect(0, 0, innerWidth, innerHeight);
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                ctxFire.beginPath();
                ctxFire.globalCompositeOperation = 'lighter';
                ctxFire.fillStyle = p.color;
                ctxFire.globalAlpha = Math.max(0, p.life / 80);
                ctxFire.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctxFire.fill();
                // motion
                p.vy += 0.04; // gravity
                p.x += p.vx; p.y += p.vy;
                p.vx *= p.decay; p.vy *= p.decay;
                p.life--;
                if (p.life <= 0) { particles.splice(i, 1); }
            }
            ctxFire.globalAlpha = 1;
            ctxFire.globalCompositeOperation = 'source-over';
            requestAnimationFrame(renderFire);
        }
        renderFire();



        /* ========= Snow-dove (simple white bird shapes flying) ========= */
        let birds = [];
        function initBirds() {
            birds = [];
            for (let i = 0; i < 3; i++) {
                birds.push({
                    x: -100 - Math.random() * 600,
                    y: 60 + Math.random() * 150,
                    sx: 1.6 + Math.random() * 1.4,
                    wing: Math.random() * Math.PI * 2
                });
            }
        }
        initBirds();

        function renderBirds() {
            // draw on canvasFire overlay (top)
            // small white V shapes
            for (const b of birds) {
                b.x += b.sx;
                b.wing += 0.2;
                if (b.x > innerWidth + 120) { b.x = -120; b.y = 60 + Math.random() * 150; b.sx = 1.4 + Math.random() * 2.4; }
            }
            // paint birds onto ctxFire (on top of fireworks already)
            ctxFire.save();
            for (const b of birds) {
                ctxFire.beginPath();
                ctxFire.strokeStyle = 'rgba(255,255,255,0.95)';
                ctxFire.lineWidth = 2;
                ctxFire.moveTo(b.x, b.y);
                ctxFire.quadraticCurveTo(b.x + 14, b.y - 6 * Math.sin(b.wing), b.x + 28, b.y);
                ctxFire.stroke();
            }
            ctxFire.restore();
            requestAnimationFrame(renderBirds);
        }
        renderBirds();

        const giftWrap = document.getElementById('giftWrap');
        const giftEl = document.getElementById('gift');
        const giftSurprise = document.getElementById('giftSurprise');
        giftWrap.addEventListener('click', () => {
            giftWrap.classList.add('open');
            giftWrap.style.filter = 'drop-shadow(0 0 25px gold)';
            const surprises = [
                "üéÑ Gi√°ng Sinh an l√†nh B√™n M·ªçi Ng∆∞·ªùi ü§ç",
                "‚ú® B·∫°n l√† ng√¥i sao‚ú®",
                "üïØÔ∏è B√¨nh y√™n & vui v·∫ª ",
                "üéÅ m√≥n qu√† c·ªßa t√¥i ch√≠nh l√† b·∫°n!"
            ];
            giftSurprise.textContent =
                surprises[Math.floor(Math.random() * surprises.length)];

            giftSurprise.style.opacity = 1;
            giftSurprise.style.transform = 'scale(1)';
            giftSurprise.classList.add('play');
            burstSpark();
            // ‚ú® sao / tuy·∫øt


            document.getElementById('giftSurprise').textContent =
                surprises[Math.floor(Math.random() * surprises.length)];

            // quick pop animation and spawn small gold chars
            giftEl.classList.add('gift-bounce');
            const particleCount = innerWidth < 768 ? 10 : 22;
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => spawnGoldParticle(giftWrap.getBoundingClientRect().left + 60, giftWrap.getBoundingClientRect().top + 20), i * 40);
            }
            setTimeout(() => giftEl.classList.remove('gift-bounce'), 900);
        });

        function spawnGoldParticle(x, y) {
            particles.push({
                x: x + (Math.random() - 0.5) * 40,
                y: y + (Math.random() - 0.5) * 40,
                vx: (Math.random() - 0.5) * 6,
                vy: (Math.random() - 1.5) * 6,
                life: 40 + Math.random() * 40,
                size: Math.random() * 2 + 1,
                color: '#ffd973',
                decay: 0.95 + Math.random() * 0.02
            });
        }

        /* ========= Gold text continuous spawn for gift effect (helper) ========= */
        setInterval(() => {
            const isMobile = innerWidth < 768;
            spawnFirework(innerWidth * 0.2 + Math.random() * innerWidth * 0.6, innerHeight * 0.25 + Math.random() * 40, '#ffd973', isMobile ? 12 : 26);
        }, 4500);

        /* ========= Page controls & music ========= */
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const openNext = document.getElementById('openNext');
        const nextPageBtn = document.getElementById('nextPage');
        const backBtn = document.getElementById('backBtn');
        const musicToggle = document.getElementById('musicToggle');
        const bgMusic = document.getElementById('bgMusic');
        const stopMusicBtn = document.getElementById('stopMusic');

        function showPage2() {
            page1.classList.remove('visible'); page1.classList.add('hidden');
            page2.classList.remove('hidden'); page2.classList.add('visible');
            playMusic();
        }
        function showPage1() {
            page2.classList.remove('visible'); page2.classList.add('hidden');
            page1.classList.remove('hidden'); page1.classList.add('visible');
            stopMusic();
        }

        openNext.addEventListener('click', showPage2);
        nextPageBtn.addEventListener('click', showPage2);
        backBtn.addEventListener('click', showPage1);

        musicToggle.addEventListener('click', () => {
            if (bgMusic.paused) { playMusic(); } else { stopMusic(); }
        });
        stopMusicBtn.addEventListener('click', () => stopMusic());

        function playMusic() {
            bgMusic.play().catch(() => { /* may require user gesture; gift click or openNext is user gesture */ });
            musicToggle.textContent = 'üîä T·∫Øt nh·∫°c';
        }
        function stopMusic() {
            bgMusic.pause();
            bgMusic.currentTime = 0;
            musicToggle.textContent = 'üîà Nh·∫°c';
        }

        /* ========= small helper: spawn one firework on click for fun ========= */
        document.addEventListener('click', (e) => {
            // spawn at click but avoid when clicking UI controls
            if (e.target.closest('.controls') || e.target.closest('button')) return;
            spawnFirework(e.clientX, e.clientY, `hsl(${Math.random() * 360},85%,60%)`, 28);
        });

        /* ========= Responsive re-init on resize ========= */
        window.addEventListener('resize', () => {
            initStars(); initSnow1(); initSnow2(); initGold();
            resizeAll();
            drawBgGlow();
        });

        /* ========= initial small bursts to look lively ========= */
        setTimeout(() => { randomBursts(); randomBursts(); }, 600);

        let wind = 0;
        setInterval(() => {
            wind = Math.sin(Date.now() * 0.0004) * 1.6;
        }, 20);

        function applyWindToSnow() {
            flakes1.forEach(f => f.x += wind * (f.r * 0.3));
            flakes2.forEach(f => f.x += wind * (f.r * 0.08));
        }
        setInterval(applyWindToSnow, 20);


        function burstSpark() {
            const icons = ['‚ú®', '‚ùÑÔ∏è', '‚≠ê', 'üí´'];
            for (let i = 0; i < 12; i++) {
                const s = document.createElement('div');
                s.className = 'spark';
                s.textContent = icons[Math.floor(Math.random() * icons.length)];
                s.style.left = '50%';
                s.style.top = '50%';
                s.style.setProperty('--x', (Math.random() * 160 - 80) + 'px');
                s.style.setProperty('--y', (-Math.random() * 120 - 40) + 'px');
                giftWrap.appendChild(s);
                setTimeout(() => s.remove(), 1400);
            }
        }

    </script>

</body>

</html>